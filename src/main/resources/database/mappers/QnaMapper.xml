
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

  
<mapper namespace="com.iu.s2.qna.QnaDAO">
 
<sql id="contents">

	<if test="kind =='writer'">
		WHERE WRITER LIKE '%'||#{search}||'%'
	</if>
	<if test="kind =='title'">
	WHERE TITLE LIKE '%'||#{search}||'%'
	</if>

</sql> 

<select id="getQnaCount"  parameterType="Pagers" resultType="Long">
	SELECT COUNT(NUM) FROM QNA
	<include refid="contents"></include>
</select>




<select id="getQnaList" parameterType="Pagers"  resultType="QnaDTO">
	SELECT * FROM
	(	SELECT ROWNUM R, Q.* FROM
	(SELECT TITLE, WRITER, REGDATE FROM QNA
	<include refid="contents"></include>
	
	)Q
	)
	WHERE R BETWEEN #{startRow} AND #{lastRow}
	
</select>


</mapper>